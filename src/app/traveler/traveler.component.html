<div class="bg-image"></div>

<div class="app-wrapper">
  <div class="header" appLanguageDirection>
    <div class="header-actions">
      <app-header-actions></app-header-actions>
    </div>
    <div class="header-language">
      <app-language-picker></app-language-picker>
    </div>
  </div>
  <div class="traveler-app">
    <router-outlet />
  </div>

  <div class="footer">
    <img class="candle" [src]="'/candle.svg'" (click)="onCandleClick()" />
    <div class="scroll-container">
      <span class="scroll-text">
        המערכת נבנתה לעילוי נשמת דניאל בן שרה קביאטק ע״ה
      </span>
    </div>
    <img class="candle" [src]="'/candle.svg'" (click)="onCandleClick()" />
    
    <!-- Hidden test printer easter egg -->
     <!-- TODO: i18n -->
    <div *ngIf="showTestPrinter" class="test-printer-modal" (click)="hideTestPrinter()">
      <div class="test-printer-content" (click)="$event.stopPropagation()">
        <h3>🖨️ Printer Test</h3>
        <p>Click to test the printer connection</p>
        <button mat-raised-button color="primary" (click)="testPrinter()" [disabled]="isTestingPrinter">
          <mat-icon>print</mat-icon>
          Test Printer
          <mat-spinner *ngIf="isTestingPrinter" diameter="20" style="margin-left: 8px;"></mat-spinner>
        </button>
        <button mat-button (click)="hideTestPrinter()">Close</button>
        <div *ngIf="testResult" class="test-result" [ngClass]="{'success': testResult.success, 'error': !testResult.success}">
          {{ testResult.message }}
        </div>
      </div>
    </div>
  </div>
</div>
